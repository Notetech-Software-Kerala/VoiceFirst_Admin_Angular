/* ===============================
   COMPONENT-SCOPED STYLES
   =============================== */

/* --- Top Site Nav: always visible --- */
.site-nav {
    position: sticky;
    top: 0;
    z-index: 19;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 8px 12px;
    background: var(--color-bg-primary);
    border-bottom: 1px solid var(--color-border-hr);
}

/* left cluster (menu/brand/links) */
.nav-left {
    display: flex;
    align-items: center;
    gap: 12px;
    min-width: 0;
}

/* right cluster: actions pushed to extreme right */
.nav-actions {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* --- Top-nav buttons --- */
.site-nav .sidebar-toggle {
    display: none;
    height: 40px;
    width: 40px;
    border: none;
    cursor: pointer;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    color: var(--color-text-primary);
    background: var(--color-bg-secondary);
    transition: 0.2s ease;
}

.site-nav .sidebar-toggle:hover {
    background: var(--color-hover-secondary);
}

/* Optional: if you keep a generic icon-btn burger in nav-left */
.burger {
    display: none;
}


/* Brand (optional) */
.brand {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    color: var(--color-text-primary);
}

.brand-logo {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    object-fit: cover;
}

.brand-name {
    font-weight: 600;
}

/* Icon buttons used in actions (notifications/theme) */
.icon-btn {
    position: relative;
    height: 36px;
    width: 36px;
    border: none;
    border-radius: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 3px 9px var(--color-shadow);
    background: var(--color-bg-sidebar);
    color: var(--color-text-primary);
    cursor: pointer;
    transition: background 0.2s ease;
}

.icon-btn:hover {
    background: var(--color-hover-secondary);
}

.icon-btn .badge {
    position: absolute;
    top: -3px;
    right: -3px;
    min-width: 16px;
    height: 16px;
    padding: 0 4px;
    border-radius: 999px;
    font-size: 10px;
    line-height: 16px;
    text-align: center;
    color: #fff;
    background: #ef4444;
}

/* Profile button */
.profile-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 4px 8px;
    border: 1px solid var(--color-border-hr);
    border-radius: 999px;
    background: var(--color-bg-sidebar);
    color: var(--color-text-primary);
    cursor: pointer;
    transition: background 0.2s ease, border-color 0.2s ease;
}

.profile-btn:hover {
    background: var(--color-bg-secondary);
    border-color: var(--color-hover-secondary);
}

.profile-btn .avatar {
    width: 26px;
    height: 26px;
    border-radius: 999px;
    object-fit: cover;
}

.profile-btn .profile-name {
    font-size: 0.95rem;
}

.profile-btn .caret {
    font-size: 20px;
}

/* --- Sidebar --- */
.sidebar {
    position: sticky;
    top: 0;
    width: 280px;
    height: 100vh;
    display: flex;
    flex-shrink: 0;
    flex-direction: column;
    background: var(--color-bg-sidebar);
    border-right: 1px solid var(--color-border-hr);
    box-shadow: 0 3px 9px var(--color-shadow);
    transition: width 0.4s ease, left 0.4s ease;
}

.sidebar.collapsed {
    width: 90px;
}

.sidebar .sidebar-header {
    padding: 12px 8px;
    display: flex;
    position: relative;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--color-border-hr);
}

.sidebar-header .header-logo {
    width: 46px;
    height: 46px;
    display: block;
    object-fit: contain;
    transition: opacity 0.4s ease;
}


/* legacy header toggle (kept in case you re-enable it) */
.sidebar-header .sidebar-toggle {
    height: 30px;
    width: 30px;
    border: none;
    cursor: pointer;
    display: none;
    border: none;
    border-radius: 8px;
    align-items: center;
    justify-content: center;
    background: none;
    color: var(--color-text-primary);
    cursor: pointer;
    transition: 0.4s ease;
}

.sidebar-header .sidebar-toggle:hover {
    background: none;
}

.sidebar.collapsed .sidebar-header .sidebar-toggle {
    transform: translateX(-2px);
    height: 48px;
    width: 50px;
}

.sidebar-header .sidebar-toggle span {
    font-size: 1.75rem;
    transition: transform 0.4s ease;
}

.sidebar.collapsed .sidebar-toggle span {
    transform: rotate(180deg);
}

.sidebar .sidebar-content {
    flex: 1;
    padding: 20px 18px;
    overflow: hidden auto;
    scrollbar-width: thin;
    scrollbar-color: var(--color-text-placeholder) transparent;
}

.sidebar.collapsed .sidebar-content {
    scrollbar-width: none;
}

/* Search (if enabled later) */
.sidebar-content .search-form {
    border-radius: 8px;
    min-height: 48px;
    margin: 5px 0 20px;
    align-items: center;
    display: flex;
    padding: 0 15px;
    white-space: nowrap;
    background: var(--color-bg-secondary);
    transition: 0.4s ease;
    cursor: text;
}

.sidebar.collapsed .search-form:hover {
    cursor: pointer;
}

.sidebar-content .search-form:focus-within,
.sidebar.collapsed .search-form:hover {
    background: var(--color-hover-secondary);
}

.sidebar-content .search-form span {
    color: var(--color-text-placeholder);
}

.search-form input {
    background: none;
    outline: none;
    border: none;
    width: 100%;
    margin-left: 15px;
    font-size: 1rem;
    color: var(--color-text-primary);
}

.search-form input::placeholder {
    color: var(--color-text-placeholder);
}

/* Menu list */
.sidebar-content .menu-list {
    display: flex;
    gap: 6px;
    list-style: none;
    flex-direction: column;
    padding-left: 0;
    margin: 0;
}

.menu-list .menu-link {
    display: flex;
    align-items: center;
    gap: 12px;
    white-space: nowrap;
    border-radius: 8px;
    padding: 10px 16px;
    text-decoration: none;
    color: var(--color-text-primary);
    transition: all 0.2s ease;
    border: 1px solid transparent;
}

/* when any child is active, <li> gets .active from RouterLinkActive */
.menu-item.active>.menu-link,
.menu-list .menu-link.active {
    color: var(--color-hover-primary);
    background: #e5f3fb;
    /* Light blue tint */
    font-weight: 500;
    border-color: rgba(105, 92, 254, 0.1);
}

.menu-item.open>.submenu {
    max-height: 500px;
}

.menu-item.active>.menu-link .submenu-caret {
    transform: rotate(180deg);
}

.menu-link .menu-label {
    transition: opacity 0.3s ease;
}

.sidebar.collapsed .menu-link .menu-label {
    opacity: 0;
    pointer-events: none;
}

.menu-list .menu-link:hover {
    color: var(--color-hover-primary);
    background: #f1f5f9;
}

/* Sidebar footer / theme toggle */
.sidebar .sidebar-footer {
    padding: 20px 18px;
    white-space: nowrap;
    border-top: 1px solid var(--color-border-hr);
}

.sidebar-footer .theme-toggle {
    width: 100%;
    min-height: 48px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    cursor: pointer;
    border: none;
    padding: 0 15px;
    white-space: nowrap;
    color: var(--color-text-primary);
    background: var(--color-bg-secondary);
    transition: 0.3s ease;
}

.sidebar-footer .theme-toggle:hover {
    background: var(--color-hover-secondary);
}

.theme-toggle .theme-label {
    display: flex;
    gap: 10px;
    align-items: center;
}

.theme-toggle .theme-label .theme-text {
    font-size: 1rem;
    transition: opacity 0.4s 0.2s ease;
}

.sidebar.collapsed .theme-toggle :where(.theme-text, .theme-toggle-track) {
    opacity: 0;
    width: 0;
    transition: all 0.2s ease;
}

.theme-toggle .theme-toggle-track {
    height: 24px;
    width: 48px;
    border-radius: 999px;
    margin-left: auto;
    background: #c3d1ec;
    position: relative;
    transition: opacity 0.4s 0.2s ease, background-color 0.3s ease;
}

.theme-toggle-track .theme-toggle-indicator {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
}

/* Layout */
.wrapper {
    display: flex;
}

.wrapper .main-wrapper {
    flex: 1;
    padding: 16px 30px 0px 30px;
    color: var(--color-text-primary);
}

.main-wrapper .page-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 20px;
}


/* ---- Submenu styles ---- */
.menu-link.has-children {
    justify-content: flex-start;
}

.menu-link.has-children .submenu-caret {
    margin-left: auto;
    flex: 0 0 auto;
    transition: transform .25s;
}

.menu-link.has-children .submenu-caret.open {
    transform: rotate(180deg);
}

/* Collapsed sidebar: hide labels and submenus */
.sidebar.collapsed .submenu,
.sidebar.collapsed .menu-link.has-children .submenu-caret {
    display: none !important;
}

/* Submenu wrapper with height transition */
.submenu {
    list-style: none;
    margin: 4px 0 8px 0;
    padding-left: 40px;
    margin-bottom: 0px;
    /* indent under parent */
    overflow: hidden;
    max-height: 0;
    transition: max-height 0.28s ease;
    position: relative;
}

.submenu.open {
    max-height: 500px;
}

/* large enough for typical lists */
.submenu-item {
    margin: 2px 0;
}

.submenu-link {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 2px;
    text-decoration: none;
    color: var(--color-text-primary);
    border-radius: 8px;
    transition: 0.25s ease;
    font-size: 0.8rem;
}

.submenu-link.active {
    color: var(--color-hover-primary);
}

.submenu-link:hover {
    color: var(--color-hover-primary);
    background: #e5f3fb;
}

.submenu-bullet {
    width: 6px;
    height: 6px;
    border-radius: 999px;
    background: var(--color-text-placeholder);
    flex: 0 0 6px;
}

/* Optional: subtle left guide line */
/* .submenu::before {
    content: "";
    position: absolute;
    left: 28px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--color-border-hr);
    opacity: 0.5;
} */

/* --- Responsive --- */
@media (max-width: 768px) {

    /* overlay behind sidebar */
    :host ::ng-deep body::before {
        content: "";
        position: fixed;
        inset: 0;
        z-index: 10;
        opacity: 0;
        pointer-events: none;
        background: rgba(0, 0, 0, 0.6);
        transition: 0.4s ease;
    }

    :host ::ng-deep body:has(.sidebar:not(.collapsed))::before {
        opacity: 1;
        pointer-events: auto;
    }

    :host ::ng-deep body:has(.sidebar:not(.collapsed)) {
        overflow: hidden;
    }

    /* show burger on small screens */
    .site-nav .sidebar-toggle {
        display: inline-flex;
    }

    .burger {
        display: inline-flex;
    }

    /* in case you use icon-btn burger */

    /* mobile sidebar slide-in */
    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        z-index: 20;
        width: 270px;
        transition: left 0.4s ease;
    }

    .sidebar.collapsed {
        left: -270px;
        width: 270px;
    }

    .wrapper .main-wrapper {
        padding: 16px 30px 0px 30px;
    }

    /* optional: hide brand text to save space */
    .brand-name {
        display: none;
    }

    .sidebar-header .sidebar-toggle {
        display: block;
    }
}

/* ===============================
   COMPACT / DENSE OVERRIDES
   (append-only; tweak sizes/paddings)
   =============================== */

/* Global text scale */
:host {
    font-size: 14px;
}

/* was ~16px */

/* Sidebar sizing */
.sidebar {
    width: 270px;
}

.sidebar.collapsed {
    width: 76px;
}

.sidebar-header .header-logo {
    width: 160px;
    height: 40px;
}

/* Menu rows */
.menu-list .menu-link {
    gap: 10px;
    padding: 9px 12px;
    font-size: 0.92rem;
    line-height: 1.8;
}

.menu-link .menu-label {
    font-size: 0.85rem;
}

/* Icon size (Material Symbols) */
.menu-link .material-symbols-rounded,
.submenu-link .material-symbols-rounded,
.site-nav .material-symbols-rounded {
    font-size: 20px;
    /* default is 24px */
}

/* Submenus compact */
.submenu {
    padding-left: 32px;
}

/* .submenu-link {
   padding: 8px 2px;
    gap: 8px;
    font-size: 0.8rem;
} */

.submenu-bullet {
    width: 5px;
    height: 5px;
}

.submenu.open {
    max-height: 420px;
}

/* Top nav density */
.site-nav {
    gap: 10px;
    padding: 6px 10px;
}

.nav-left {
    gap: 10px;
}

.nav-actions {
    gap: 6px;
}

/* Buttons compact */
.site-nav .sidebar-toggle,
.icon-btn {
    height: 32px;
    width: 32px;
    border-radius: 8px;
}

/* Notification badge */
.icon-btn .badge {
    min-width: 14px;
    height: 14px;
    line-height: 14px;
    font-size: 9px;
}

/* Profile compact */
.profile-btn {
    gap: 6px;
    padding: 3px;
    border-radius: 999px;
}

.profile-btn .avatar {
    width: 26px;
    height: 26px;
}

.profile-btn .profile-name {
    font-size: 0.9rem;
}

.profile-btn .caret {
    font-size: 18px;
}

/* Theme toggle shrunk */
.theme-toggle {
    min-height: 44px;
    padding: 0 12px;
}

.theme-toggle .theme-label {
    gap: 8px;
}

.theme-toggle .theme-label .theme-text {
    font-size: 0.95rem;
}

.theme-toggle .theme-toggle-track {
    height: 22px;
    width: 42px;
}

.theme-toggle-track .theme-toggle-indicator {
    top: 3px;
    left: 3px;
    width: 16px;
    height: 16px;
}

:host-context(body.dark-theme) .theme-toggle-indicator {
    transform: translateX(20px);
}

/* Search compact (if re-enabled) */
.sidebar-content .search-form {
    min-height: 42px;
    padding: 0 12px;
}

.search-form input {
    font-size: 0.95rem;
    margin-left: 12px;
}

/* Sidebar paddings compact */
.sidebar .sidebar-content {
    padding: 16px 14px;
}

.sidebar .sidebar-footer {
    padding: 16px 14px;
}

/* Ensure caret at far right */
.menu-link.has-children {
    justify-content: flex-start;
}

.menu-link.has-children .submenu-caret {
    margin-left: auto;
    flex: 0 0 auto;
}

/* Main content styles  */

.main-content {
    flex: 1;
    padding: 20px 10px 10px 10px;
    color: var(--color-text-primary);
    min-height: 88.5svh;
    display: flex;
    flex-direction: column;
}

footer {
    padding: 8px 16px;
    background: var(--color-bg-sidebar);
    border-top-right-radius: 15px;
    height: 44px;
    border-top-left-radius: 15px;
    display: flex;
    align-items: center;
    box-shadow: 0 3px 9px var(--color-shadow);
}

.footer-container {
    font-size: 0.79rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.footer-container .footer-text {
    color: var(--footer-text-color);
    margin-bottom: 0px;
}

.profile-btn.dropdown-toggle::after {
    display: none;
}

/* hide the default caret */
/* ===== Profile dropdown (Bootstrap 5) ===== */

/* Panel */
.dropdown-menu {
    min-width: 200px;
    border: none;
    border-radius: 10px;
    box-shadow: 0 3px 9px var(--color-shadow, rgba(0, 0, 0, .12));
    background: var(--color-bg-sidebar, #fff);
    color: var(--color-text-primary, #111);
    font-size: 0.85rem;
    padding: 6px;
    /* soft inner padding around items */
}

/* Divider spacing */

.dropdown-item {
    color: var(--color-text-primary) !important;
    border-radius: 6px;
}

.dropdown-item:hover {
    color: var(--color-hover-primary) !important;
    background: none !important;
    border-radius: 6px;
}